<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Omelet &amp; Egg Dish Simplex: Eggs vs Dairy vs Vegetables</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: #0f1117;
    color: #e0e0e0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 { margin: 24px 0 4px; font-size: 1.6rem; font-weight: 600; color: #f5f5f5; text-align: center; }
  .subtitle { color: #888; font-size: 0.85rem; margin-bottom: 4px; text-align: center; max-width: 700px; padding: 0 12px; }
  .note { color: #666; font-size: 0.75rem; margin-bottom: 14px; text-align: center; max-width: 700px; padding: 0 12px; font-style: italic; }
  #plot { width: 95vw; max-width: 1050px; height: 82vh; min-height: 650px; }
  .legend-section { max-width: 1050px; width: 95vw; padding: 16px 0 32px; }
  .legend-section h2 { font-size: 1rem; color: #aaa; margin-bottom: 10px; font-weight: 500; }
  .shape-legend { display: flex; gap: 24px; margin-bottom: 16px; flex-wrap: wrap; }
  .shape-legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.82rem; color: #aaa; }
  .shape-icon { width: 14px; height: 14px; display: inline-block; }
  table { width: 100%; border-collapse: collapse; font-size: 0.78rem; }
  th { text-align: left; padding: 6px 8px; color: #888; border-bottom: 1px solid #333; font-weight: 500; }
  td { padding: 4px 8px; border-bottom: 1px solid #1e2028; }
  tr:hover td { background: #1a1c25; }
  .type-tag, .region-tag {
    display: inline-block; padding: 1px 6px; border-radius: 3px;
    font-size: 0.7rem; font-weight: 500;
  }
  .filter-bar { display: flex; gap: 10px; margin: 10px 0 6px; flex-wrap: wrap; }
  .filter-btn {
    padding: 4px 12px; border-radius: 4px; border: 1px solid #444;
    background: #1a1c25; color: #ccc; font-size: 0.78rem; cursor: pointer;
    transition: all 0.15s;
  }
  .filter-btn.active { background: #2a3a5a; border-color: #5599ee; color: #fff; }
  .filter-btn:hover { border-color: #777; }
</style>
</head>
<body>

<h1>The Egg Dish Simplex</h1>
<p class="subtitle">42 omelets, frittatas &amp; stratas plotted by relative weight of eggs, dairy &amp; vegetables</p>
<p class="note">Dairy = cheese + butter + cream + milk. Bread in stratas excluded. Hover for full details.</p>
<div id="plot"></div>

<div class="legend-section">
  <div class="shape-legend">
    <div class="shape-legend-item"><svg class="shape-icon" viewBox="0 0 14 14"><circle cx="7" cy="7" r="5" fill="#3498db"/></svg> Omelet</div>
    <div class="shape-legend-item"><svg class="shape-icon" viewBox="0 0 14 14"><polygon points="7,1 13,13 1,13" fill="#2ecc71"/></svg> Frittata</div>
    <div class="shape-legend-item"><svg class="shape-icon" viewBox="0 0 14 14"><rect x="2" y="2" width="10" height="10" fill="#e67e22"/></svg> Strata</div>
  </div>

  <div class="filter-bar">
    <button class="filter-btn active" data-type="all">All (42)</button>
    <button class="filter-btn" data-type="Omelet">Omelets</button>
    <button class="filter-btn" data-type="Frittata">Frittatas</button>
    <button class="filter-btn" data-type="Strata">Stratas</button>
  </div>

  <h2>Data Table — Per-Serving Ingredient Weights (grams)</h2>
  <div style="overflow-x:auto">
    <table id="dataTable">
      <thead>
        <tr><th>#</th><th>Name</th><th>Type</th><th>Origin</th><th>Eggs (g)</th><th>Dairy (g)</th><th>Veg (g)</th><th>Eggs %</th><th>Dairy %</th><th>Veg %</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
// ══════════════════════════════════════════════════════════════════════
// DATA — [name, type, region, eggs_g, dairy_g, veg_g, notes]
//
// Dairy = cheese + butter + cream + milk + paneer + yogurt
// Vegetables = potatoes, herbs, alliums, peppers, greens, mushrooms, eggplant, etc.
// Per single serving. Frittatas & stratas ÷ 6 servings from standard recipes.
// Bread in stratas is NOT included in any axis (noted in descriptions).
// ══════════════════════════════════════════════════════════════════════

const data = [
  // ── OMELETS ───────────────────────────────────────────────────────
  ["French Omelette",           "Omelet",   "France",       150, 21,   4,  "3 eggs, 21g butter, fines herbes"],
  ["Omelette Mère Poulard",    "Omelet",   "France",       150, 43,   0,  "3 eggs, 28g butter, 15g cream; Mont-Saint-Michel"],
  ["Soufflé Omelette",          "Omelet",   "France",       150, 29,   0,  "Whipped whites; 14g butter + 15g cheese"],
  ["Sweet/Dessert Omelette",    "Omelet",   "France",       150, 28,   0,  "Sugar, 28g butter, kirsch or rum; no veg"],
  ["Omelette Arnold Bennett",   "Omelet",   "England",      150, 84,   0,  "Smoked haddock; 40g cheese + 30g cream + 14g butter"],
  ["Denver / Western",          "Omelet",   "USA",          150, 44,  90,  "30g cheddar + 14g butter; bell peppers, onions, ham"],
  ["American Country",          "Omelet",   "USA",          150, 74,  80,  "60g cheese + 14g butter; peppers, onions, mushrooms"],
  ["Cheese Omelette",           "Omelet",   "Generic",      150, 59,   0,  "45g cheddar/gruyère + 14g butter"],
  ["Veggie Omelette",           "Omelet",   "Generic",      120, 44, 150,  "30g cheese + 14g butter; spinach, peppers, mushrooms, onions"],
  ["Mushroom & Swiss",          "Omelet",   "Generic",      150, 54,  80,  "40g Swiss + 14g butter; sautéed mushrooms"],
  ["Spanish Tortilla",          "Omelet",   "Spain",        100,  0, 275,  "Olive oil only (no dairy); potatoes 225g + onions 50g"],
  ["Greek Omelette",            "Omelet",   "Greece",       120, 50, 100,  "40g feta + 10g butter; tomatoes, olives, peppers"],
  ["Greek Fourtalia",           "Omelet",   "Greece",       120,  0, 200,  "Andros island; potatoes, sausages; olive oil only"],
  ["Dutch Boerenomelet",        "Omelet",   "Netherlands",  120, 14, 200,  "14g butter; mushrooms, potatoes, leeks, peas"],
  ["Turkish Kaygana",           "Omelet",   "Turkey",       120, 40,  80,  "30g feta + 10g butter; peppers, tomatoes"],
  ["Japanese Tamagoyaki",       "Omelet",   "Japan",        150,  0,   0,  "Rolled layers; sugar, mirin, soy — no dairy or veg"],
  ["Korean Gyeran-mari",        "Omelet",   "Korea",        150,  0,  60,  "Rolled egg; carrots, scallions; oil only"],
  ["Thai Khai Jiao",            "Omelet",   "Thailand",     150,  0,  20,  "Deep-fried egg; scallions; oil only"],
  ["Indian Masala Omelette",    "Omelet",   "India",        120,  0,  80,  "Oil only; onions, green chilies, tomatoes, spices"],
  ["Indian Paneer Omelette",    "Omelet",   "India",        120, 60,  40,  "60g paneer; onions, chilies"],
  ["Iranian Kuku Sabzi",        "Omelet",   "Iran",         100,  0, 200,  "Herb-packed: parsley, cilantro, dill, fenugreek; oil only"],
  ["Iranian Nargesi",           "Omelet",   "Iran",         100,  0, 200,  "Spinach & onion omelette; oil only"],
  ["Filipino Tortang Talong",   "Omelet",   "Philippines",  100,  0, 150,  "Roasted eggplant dipped in egg; oil only"],
  ["Chinese Egg Foo Young",     "Omelet",   "China",        120,  0, 150,  "Bean sprouts, cabbage, scallions; oil; gravy"],
  ["Indonesian Fuyunghai",      "Omelet",   "Indonesia",    120,  0, 150,  "Carrots, bean sprouts, cabbage; sweet sauce"],
  ["Oyster Omelette",           "Omelet",   "China/Taiwan", 100,  0,  30,  "Oysters + starch batter + scallions; oil only"],

  // ── FRITTATAS (per serving, recipe ÷ 6) ───────────────────────────
  // Base ratio: 8 eggs + 80g cream → per serving: 67g eggs + 13g cream
  ["Garden Vegetable Frittata",           "Frittata", "Italy",   67, 30,  80, "13g cream + 17g parmesan; bell pepper, zucchini, onion"],
  ["Mediterranean Frittata",              "Frittata", "Italy",   67, 33,  75, "13g cream + 20g feta; artichokes, spinach, tomatoes"],
  ["Caprese Frittata",                    "Frittata", "Italy",   67, 48,  60, "13g cream + 25g mozzarella + 10g feta; squash, tomatoes"],
  ["Bacon Potato Spinach Frittata",       "Frittata", "USA",     67, 38,  70, "13g cream + 25g cheddar; potatoes, spinach, bacon"],
  ["Sausage & Peppers Frittata",          "Frittata", "Italy",   67, 30,  65, "13g cream + 17g parmesan; peppers, onions, sausage"],
  ["Asparagus & Feta Frittata",           "Frittata", "Generic", 67, 38,  60, "13g cream + 25g feta; asparagus"],
  ["Spinach Mushroom Frittata",           "Frittata", "Generic", 67, 33,  90, "13g cream + 20g emmentaler; spinach, mushrooms, onion"],
  ["Potato-Crusted Frittata",             "Frittata", "Generic", 67, 33, 100, "13g cream + 20g goat cheese; potato crust"],
  ["Zucchini & Herb Frittata",            "Frittata", "Italy",   67, 30,  85, "13g cream + 17g pecorino; zucchini, herbs, onion"],
  ["Roasted Pepper & Goat Cheese Frittata","Frittata","Generic", 67, 43,  55, "13g cream + 30g goat cheese; roasted peppers, onion"],
  ["Pasta Frittata (Frittata di Pasta)",  "Frittata", "Italy",   67, 43,  30, "13g cream + 20g mozz + 10g parm; tomatoes (+ pasta, not counted)"],

  // ── STRATAS (per serving, recipe ÷ 6) ─────────────────────────────
  // Base: 8 eggs + 480g milk → per serving: 67g eggs + 80g milk
  // Bread ~50g/serving excluded from axes.
  ["Mediterranean Strata",      "Strata", "Generic", 67, 110, 30, "80g milk + 15g parmesan + 15g chèvre; roasted peppers (+ bread)"],
  ["Spinach & Bacon Strata",    "Strata", "USA",     67, 105, 40, "80g milk + 25g parmesan; spinach, bacon (+ bread)"],
  ["Tomato Cheddar Strata",     "Strata", "USA",     67, 110, 50, "80g milk + 30g cheddar; tomatoes (+ bread)"],
  ["Cheese & Bacon Strata",     "Strata", "USA",     67, 115, 10, "80g milk + 35g cheddar; minimal veg (+ bread)"],
  ["Sausage Strata",            "Strata", "USA",     67, 105, 35, "80g milk + 25g gruyère; onion, peppers, sausage (+ bread)"],
  ["Ham & Potato Strata",       "Strata", "USA",     67, 105, 60, "80g milk + 25g cheddar; potatoes, onion, ham (+ bread)"],
  ["Broccoli Cheddar Strata",   "Strata", "USA",     67, 115, 65, "80g milk + 35g cheddar; broccoli, onion (+ bread)"],
  ["Mushroom Gruyère Strata",   "Strata", "Generic", 67, 110, 55, "80g milk + 30g gruyère; mushrooms, leeks (+ bread)"],
];

// ── REGION → COLORS ─────────────────────────────────────────────────
const regionColors = {
  "France":"#e74c3c","England":"#9b59b6","USA":"#3498db","Generic":"#95a5a6",
  "Spain":"#e67e22","Italy":"#2ecc71","Greece":"#1abc9c","Netherlands":"#f39c12",
  "Turkey":"#d35400","Japan":"#e84393","Korea":"#fd79a8","Thailand":"#00cec9",
  "India":"#fdcb6e","Iran":"#6c5ce7","Philippines":"#00b894",
  "China":"#ff7675","China/Taiwan":"#fab1a0","Indonesia":"#55efc4",
};

// ── TYPE → MARKER SHAPE ─────────────────────────────────────────────
const typeShapes = { "Omelet": "circle", "Frittata": "triangle-up", "Strata": "square" };
const typeSizes  = { "Omelet": 13, "Frittata": 12, "Strata": 12 };

// ── BUILD TRACES (one per type for legend) ──────────────────────────
const types = ["Omelet", "Frittata", "Strata"];
const traces = [];

types.forEach(type => {
  const subset = data.filter(d => d[1] === type);
  const a = [], b = [], c = [], texts = [], htexts = [], clrs = [];

  subset.forEach(d => {
    const [name, , region, eg, dg, vg, notes] = d;
    const total = eg + dg + vg || 1;
    const ep = eg / total * 100, dp = dg / total * 100, vp = vg / total * 100;
    a.push(ep); b.push(dp); c.push(vp);
    texts.push(name);
    clrs.push(regionColors[region] || "#95a5a6");
    htexts.push(
      `<b>${name}</b><br><span style="color:#888">${type} · ${region}</span><br>` +
      `<br>Eggs: <b>${eg}g</b> (${ep.toFixed(1)}%)` +
      `<br>Dairy: <b>${dg}g</b> (${dp.toFixed(1)}%)` +
      `<br>Vegetables: <b>${vg}g</b> (${vp.toFixed(1)}%)` +
      `<br><br><i>${notes}</i>`
    );
  });

  traces.push({
    type: "scatterternary",
    mode: "markers+text",
    name: type,
    a, b, c,
    text: texts,
    textposition: "top center",
    textfont: { size: 8.5, color: "#999" },
    hovertext: htexts,
    hoverinfo: "text",
    marker: {
      symbol: typeShapes[type],
      size: typeSizes[type],
      color: clrs,
      line: { width: 1.5, color: "#222" },
      opacity: 0.92,
    },
  });
});

const layout = {
  ternary: {
    sum: 100,
    aaxis: {
      title: { text: "Eggs %", font: { size: 15, color: "#e74c3c" } },
      tickfont: { size: 11, color: "#888" }, gridcolor: "#2a2a35", linecolor: "#444", min: 0,
    },
    baxis: {
      title: { text: "Dairy %", font: { size: 15, color: "#f1c40f" } },
      tickfont: { size: 11, color: "#888" }, gridcolor: "#2a2a35", linecolor: "#444", min: 0,
    },
    caxis: {
      title: { text: "Vegetables %", font: { size: 15, color: "#2ecc71" } },
      tickfont: { size: 11, color: "#888" }, gridcolor: "#2a2a35", linecolor: "#444", min: 0,
    },
    bgcolor: "#14161e",
  },
  paper_bgcolor: "#0f1117",
  plot_bgcolor: "#14161e",
  font: { color: "#ccc" },
  margin: { t: 50, b: 30, l: 50, r: 50 },
  legend: { font: { size: 13, color: "#ccc" }, bgcolor: "rgba(0,0,0,0)" },
};

Plotly.newPlot("plot", traces, layout, {
  responsive: true, displayModeBar: true,
  modeBarButtonsToRemove: ["lasso2d", "select2d"],
});

// ── POPULATE TABLE ──────────────────────────────────────────────────
const tbody = document.querySelector("#dataTable tbody");
const typeColors = { "Omelet": "#3498db", "Frittata": "#2ecc71", "Strata": "#e67e22" };

data.forEach((d, i) => {
  const [name, type, region, eg, dg, vg, notes] = d;
  const total = eg + dg + vg || 1;
  const ep = (eg/total*100).toFixed(1), dp = (dg/total*100).toFixed(1), vp = (vg/total*100).toFixed(1);
  const rc = regionColors[region] || "#95a5a6";
  const tc = typeColors[type];
  const tr = document.createElement("tr");
  tr.dataset.type = type;
  tr.innerHTML = `
    <td>${i+1}</td><td><b>${name}</b></td>
    <td><span class="type-tag" style="background:${tc}22;color:${tc};border:1px solid ${tc}55">${type}</span></td>
    <td><span class="region-tag" style="background:${rc}22;color:${rc};border:1px solid ${rc}55">${region}</span></td>
    <td>${eg}</td><td>${dg}</td><td>${vg}</td>
    <td>${ep}%</td><td>${dp}%</td><td>${vp}%</td>`;
  tbody.appendChild(tr);
});

// ── FILTER BUTTONS ──────────────────────────────────────────────────
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const f = btn.dataset.type;
    document.querySelectorAll('#dataTable tbody tr').forEach(tr => {
      tr.style.display = (f === 'all' || tr.dataset.type === f) ? '' : 'none';
    });
  });
});
</script>
</body>
</html>
